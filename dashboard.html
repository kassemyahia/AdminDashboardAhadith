<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>ููุญุฉ ุฅุฏุงุฑุฉ ุงูุฃุญุงุฏูุซ</title>
    <style>
      :root {
        --bg: #0f172a; /* slate-900 */
        --panel: #111827; /* gray-900 */
        --muted: #94a3b8; /* slate-400 */
        --text: #e5e7eb; /* gray-200 */
        --primary: #22c55e; /* green-500 */
        --primary-600: #16a34a;
        --danger: #ef4444;
        --border: #1f2937; /* gray-800 */
        --accent: #0ea5e9; /* sky-500 */
        --shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
        --radius: 18px;
      }
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter,
          "Noto Kufi Arabic", Tahoma, Arial, sans-serif;
        background: radial-gradient(
            1200px 800px at 80% -200px,
            rgba(34, 197, 94, 0.15),
            transparent 60%
          ),
          var(--bg);
        color: var(--text);
      }
      .layout {
        display: grid;
        grid-template-columns: 260px 1fr;
        min-height: 100svh;
      }
      aside {
        border-inline-start: 1px solid var(--border);
        background: linear-gradient(180deg, #0b1220, #0a0f1a);
        padding: 20px 16px;
        position: sticky;
        top: 0;
        height: 100svh;
        overflow: auto;
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 18px;
      }
      .logo {
        width: 38px;
        height: 38px;
        border-radius: 12px;
        background: conic-gradient(
          from 200deg,
          var(--primary),
          #10b981,
          #14b8a6,
          #60a5fa
        );
        box-shadow: var(--shadow);
        border: 1px solid #0ea5e9;
      }
      .brand h1 {
        font-size: 18px;
        margin: 0;
      }
      .search {
        display: flex;
        gap: 8px;
        margin: 12px 0 18px;
        background: #0b1321;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 8px 10px;
      }
      .search input {
        flex: 1;
        background: transparent;
        border: 0;
        color: var(--text);
        outline: none;
        font-size: 14px;
      }
      nav {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .nav-btn {
        all: unset;
        display: flex;
        align-items: center;
        gap: 10px;
        padding: 10px 12px;
        border-radius: 12px;
        cursor: pointer;
        color: var(--muted);
        border: 1px solid transparent;
      }
      .nav-btn[data-active="true"] {
        color: var(--text);
        background: linear-gradient(180deg, #0f1b2e, #0b1321);
        border-color: var(--border);
      }
      .nav-btn:hover {
        background: #0b1321;
        color: var(--text);
        border-color: var(--border);
      }
      .badge {
        margin-inline-start: auto;
        font-size: 12px;
        color: #9ca3af;
      }

      main {
        padding: 24px;
        max-width: 1200px;
        width: 100%;
        margin: auto;
        display: grid;
        gap: 22px;
      }
      .header {
        display: flex;
        align-items: center;
        gap: 14px;
        flex-wrap: wrap;
      }
      .title {
        font-size: 20px;
        font-weight: 700;
        background: linear-gradient(90deg, #e5e7eb, #9ca3af);
        -webkit-background-clip: text;
        color: transparent;
      }
      .card {
        background: linear-gradient(180deg, #0b1220, #0a0f1a);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 18px;
      }
      .grid {
        display: grid;
        gap: 14px;
      }
      .grid.cols-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
      .grid.cols-3 {
        grid-template-columns: repeat(3, minmax(0, 1fr));
      }
      @media (max-width: 980px) {
        .layout {
          grid-template-columns: 1fr;
        }
        aside {
          position: static;
          height: auto;
        }
        .grid.cols-2,
        .grid.cols-3 {
          grid-template-columns: 1fr;
        }
      }

      .field {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .field label {
        font-size: 13px;
        color: #cbd5e1;
      }
      .input,
      textarea,
      select {
        width: 100%;
        background: #0b1321;
        border: 1px solid var(--border);
        border-radius: 12px;
        padding: 10px 12px;
        color: var(--text);
        outline: none;
      }
      textarea {
        min-height: 120px;
        resize: vertical;
      }
      .hint {
        font-size: 12px;
        color: #94a3b8;
      }

      .actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        margin-top: 10px;
      }
      .btn {
        all: unset;
        cursor: pointer;
        padding: 10px 14px;
        border-radius: 12px;
        border: 1px solid var(--border);
        background: #0b1321;
        color: var(--text);
      }
      .btn.primary {
        background: var(--primary);
        border-color: var(--primary-600);
        color: #052e16;
      }
      .btn.primary:hover {
        background: var(--primary-600);
      }
      .btn.ghost:hover {
        background: #0f172a;
      }

      .tab {
        display: none;
      }
      .tab[aria-hidden="false"] {
        display: block;
        animation: fade 0.25s ease;
      }
      @keyframes fade {
        from {
          opacity: 0.4;
          transform: translateY(4px);
        }
        to {
          opacity: 1;
          transform: none;
        }
      }

      .toast {
        position: fixed;
        inset-inline: 0;
        top: 14px;
        display: flex;
        justify-content: center;
        z-index: 9999;
        pointer-events: none;
      }
      .toast > div {
        pointer-events: auto;
        background: #052e16;
        color: #bbf7d0;
        border: 1px solid #14532d;
        padding: 12px 14px;
        border-radius: 12px;
        box-shadow: var(--shadow);
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .footer {
        font-size: 12px;
        color: #9ca3af;
        text-align: center;
        padding: 10px 0 20px;
      }
      code.inline {
        background: #0b1321;
        border: 1px solid var(--border);
        padding: 2px 6px;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <div class="layout">
      <aside>
        <div class="brand">
          <div class="logo"></div>
          <h1>ููุญุฉ ุงูุฅุฏุงุฑุฉ</h1>
        </div>

        <div class="search">
          <input
            type="search"
            placeholder="ุงุจุญุซ ุฏุงุฎู ุงูููุญุฉโฆ"
            oninput="filterNav(this.value)"
          />
        </div>

        <nav id="nav">
          <button class="nav-btn" data-tab="tab-hadiths" data-active="true">
            ๐ ุฅุถุงูุฉ ุญุฏูุซ <span class="badge">H</span>
          </button>
          <button class="nav-btn" data-tab="tab-books">
            ๐ ุฅุถุงูุฉ ูุชุงุจ <span class="badge">B</span>
          </button>
          <button class="nav-btn" data-tab="tab-narrators">
            ๐ณ ุฅุถุงูุฉ ูุญุฏุซ/ุฑุงูู <span class="badge">N</span>
          </button>
          <button class="nav-btn" data-tab="tab-rulings">
            โ๏ธ ุฅุถุงูุฉ ุญูู ุญุฏูุซ <span class="badge">R</span>
          </button>
          <button class="nav-btn" data-tab="tab-topics">
            ๐ท๏ธ ุฅุถุงูุฉ ููุถูุน ุญุฏูุซ <span class="badge">T</span>
          </button>
          <button class="nav-btn" data-tab="tab-explainings">
            ๐ ุฅุถุงูุฉ ุดุฑุญ ุญุฏูุซ <span class="badge">E</span>
          </button>
        </nav>
      </aside>

      <main>
        <div class="header">
          <h2 class="title">ุฅุฏุงุฑุฉ ุงููุญุชูู</h2>
          <!-- <span class="hint"
            >ูููุฐุฌ ุฃููู ุจูุงุฌูุฉ HTML/CSS โ ุฌุงูุฒ ููุฑุจุท ูุน Laravel API
            ูุงุญููุง.</span
          > -->
        </div>

        <!-- ุชุจููุจ: ุฅุถุงูุฉ ุญุฏูุซ -->
        <section id="tab-hadiths" class="tab" aria-hidden="false">
          <div class="card grid">
            <h3>๐ ุฅุถุงูุฉ ุญุฏูุซ</h3>
            <form
              id="form-hadith"
              class="grid cols-2"
              onsubmit="handleSubmit(event, 'hadiths')"
            >
              <div class="field">
                <label>ูุต ุงูุญุฏูุซ</label>
                <textarea
                  name="hadithtext"
                  required
                  placeholder="ุฃุฏุฎู ูุต ุงูุญุฏูุซ ูุงููุงู"
                ></textarea>
                <div class="hint">ุงุญุฑุต ุนูู ุฏูุฉ ุงููุต</div>
              </div>
              <div class="field">
                <label>ุงููุต ุจุฏูู ุชุดููู (ุงุฎุชูุงุฑู)</label>
                <textarea
                  name="textwithoutdiacritics"
                  placeholder="ุฅู ูุฌุฏ"
                ></textarea>
              </div>

              <div class="field">
                <label>ููุน ุงูุญุฏูุซ</label>
                <select name="hadithtype">
                  <option value="">โ ุงุฎุชุฑ โ</option>
                  <option value="ูุฑููุน">ูุฑููุน</option>
                  <option value="ูุฏุณู">ูุฏุณู</option>
                  <option value="ุญุณู">ุญุณู</option>
                  <option value="ุถุนูู">ุถุนูู</option>
                </select>
              </div>

              <div class="field">
                <label>ุฑูู ุงูุญุฏูุซ</label>
                <input
                  class="input"
                  type="number"
                  name="hadithnumber"
                  min="0"
                  placeholder="ูุซุงู: 2083"
                />
              </div>

              <div class="field">
                <label>ุงูุฑุงูู (ID)</label>
                <input
                  class="input"
                  type="number"
                  name="narrator"
                  min="1"
                  placeholder="ูุซุงู: 20"
                />
              </div>

              <div class="field">
                <label>ุงููุชุงุจ (ID)</label>
                <input
                  class="input"
                  type="number"
                  name="source"
                  min="1"
                  placeholder="ูุซุงู: 1"
                />
              </div>

              <div class="field">
                <label>ุฑุฃู ุงููุญุฏูุซ (ruling_of_muhaddith_id)</label>
                <input
                  class="input"
                  type="number"
                  name="rulingofmuhaddith"
                  min="1"
                  placeholder="ูุซุงู: 1"
                />
              </div>

              <div class="field">
                <label>ุงูุญูู ุงูููุงุฆู (final_ruling_id)</label>
                <input
                  class="input"
                  type="number"
                  name="finalruling"
                  min="1"
                  placeholder="ูุซุงู: 1"
                />
              </div>

              <div class="field">
                <label>ุงูุดุฑุญ (explaining_id)</label>
                <input
                  class="input"
                  type="number"
                  name="explaining"
                  min="1"
                  placeholder="ูุซุงู: 2"
                />
              </div>

              <div class="field">
                <label>SubValid (ุงุฎุชูุงุฑู)</label>
                <input
                  class="input"
                  type="number"
                  name="subvalid"
                  min="0"
                  placeholder="ูููุฉ ุนุฏุฏูุฉ"
                />
              </div>

              <div class="field">
                <label>Admin (user_id)</label>
                <input
                  class="input"
                  type="number"
                  name="adminid"
                  min="1"
                  placeholder="ID ุญุณุงุจ ุงููุฏูุฑ"
                />
              </div>

              <div class="actions">
                <button class="btn primary" type="submit">ุญูุธ ุงูุญุฏูุซ</button>
                <button class="btn ghost" type="reset">ุชูุฑูุบ</button>
              </div>
            </form>
          </div>
        </section>

        <!-- ุชุจููุจ: ุฅุถุงูุฉ ูุชุงุจ -->
        <section id="tab-books" class="tab" aria-hidden="true">
          <div class="card grid">
            <h3>๐ ุฅุถุงูุฉ ูุชุงุจ</h3>
            <form
              id="form-book"
              class="grid cols-2"
              onsubmit="handleSubmit(event, 'books')"
            >
              <div class="field">
                <label>ุงุณู ุงููุชุงุจ</label>
                <input
                  class="input"
                  name="book_name"
                  required
                  placeholder="ูุซุงู: ุตุญูุญ ุงูุจุฎุงุฑู"
                />
              </div>
              <div class="field">
                <label>ุงููุญุฏูุซ (ูุต)</label>
                <input
                  class="input"
                  name="muhaddith"
                  placeholder="ูุซุงู: ุงูุฅูุงู ุงูุจุฎุงุฑู"
                />
              </div>
              <div class="field">
                <label>ุนุฏุฏ ุงูุฃุญุงุฏูุซ</label>
                <input
                  class="input"
                  type="number"
                  name="num_of_hadiths"
                  min="0"
                  value="0"
                />
              </div>
              <div class="actions">
                <button class="btn primary" type="submit">ุญูุธ ุงููุชุงุจ</button>
                <button class="btn ghost" type="reset">ุชูุฑูุบ</button>
              </div>
            </form>
          </div>
        </section>

        <!-- ุชุจููุจ: ุฅุถุงูุฉ ูุญุฏุซ/ุฑุงูู -->
        <section id="tab-narrators" class="tab" aria-hidden="true">
          <div class="card grid">
            <h3>๐ณ ุฅุถุงูุฉ ูุญุฏุซ/ุฑุงูู</h3>
            <form
              id="form-narrator"
              class="grid cols-2"
              onsubmit="handleSubmit(event, 'narrators')"
            >
              <div class="field">
                <label>ุงูุงุณู</label>
                <input
                  class="input"
                  name="name"
                  required
                  placeholder="ุงุณู ุงูุฑุงูู"
                />
              </div>
              <div class="field">
                <label>ุงูุฌูุณ</label>
                <select name="gender" class="input">
                  <option value="">โ ุงุฎุชุฑ โ</option>
                  <option value="M">ุฐูุฑ</option>
                  <option value="F">ุฃูุซู</option>
                </select>
              </div>
              <div class="field">
                <label>ููุน ุงูุฑุงูู</label>
                <select name="narrator_type" class="input">
                  <option value="">โ ุงุฎุชุฑ โ</option>
                  <option value="Muhaddith">ูุญุฏุซ</option>
                  <option value="Rawi">ุฑุงูู</option>
                </select>
              </div>
              <div class="actions">
                <button class="btn primary" type="submit">ุญูุธ ุงูุฑุงูู</button>
                <button class="btn ghost" type="reset">ุชูุฑูุบ</button>
              </div>
            </form>
          </div>
        </section>

        <!-- ุชุจููุจ: ุฅุถุงูุฉ ุญูู ุญุฏูุซ -->
        <section id="tab-rulings" class="tab" aria-hidden="true">
          <div class="card grid">
            <h3>โ๏ธ ุฅุถุงูุฉ ุญูู ุญุฏูุซ</h3>
            <form
              id="form-ruling"
              class="grid"
              onsubmit="handleSubmit(event, 'ruling_of_hadiths')"
            >
              <div class="field">
                <label>ูุต ุงูุญูู</label>
                <input
                  class="input"
                  name="RulingText"
                  required
                  placeholder="ูุซุงู: ุตุญูุญ / ุถุนูู / ุญุณู ..."
                />
              </div>
              <div class="actions">
                <button class="btn primary" type="submit">ุญูุธ ุงูุญูู</button>
                <button class="btn ghost" type="reset">ุชูุฑูุบ</button>
              </div>
            </form>
          </div>
        </section>

        <!-- ุชุจููุจ: ุฅุถุงูุฉ ููุถูุน ุญุฏูุซ -->
        <section id="tab-topics" class="tab" aria-hidden="true">
          <div class="card grid">
            <h3>๐ท๏ธ ุฅุถุงูุฉ ููุถูุน ุญุฏูุซ</h3>
            <form
              id="form-topic"
              class="grid"
              onsubmit="handleSubmit(event, 'topics')"
            >
              <div class="field">
                <label>ุงุณู ุงูููุถูุน</label>
                <input
                  class="input"
                  name="TopicName"
                  required
                  placeholder="ูุซุงู: ุงูุฃุฎูุงู / ุงูุตูุงุฉ ..."
                />
              </div>
              <div class="actions">
                <button class="btn primary" type="submit">ุญูุธ ุงูููุถูุน</button>
                <button class="btn ghost" type="reset">ุชูุฑูุบ</button>
              </div>
            </form>
          </div>
        </section>

        <!-- ุชุจููุจ: ุฅุถุงูุฉ ุดุฑุญ ุญุฏูุซ -->
        <section id="tab-explainings" class="tab" aria-hidden="true">
          <div class="card grid">
            <h3>๐ ุฅุถุงูุฉ ุดุฑุญ ุญุฏูุซ</h3>
            <form
              id="form-explaining"
              class="grid"
              onsubmit="handleSubmit(event, 'explainings')"
            >
              <div class="field">
                <label>ูุต ุงูุดุฑุญ</label>
                <textarea
                  name="ETEXT"
                  required
                  placeholder="ุฃุฏุฎู ูุต ุงูุดุฑุญ"
                ></textarea>
              </div>
              <div class="actions">
                <button class="btn primary" type="submit">ุญูุธ ุงูุดุฑุญ</button>
                <button class="btn ghost" type="reset">ุชูุฑูุบ</button>
              </div>
            </form>
          </div>
        </section>

        <!-- <div class="footer">
          ุฌุงูุฒุฉ ููุฑุจุท ูุน Laravel. ูุซุงู ุฑุจุท:
          <code class="inline">POST /api/hadiths</code>ุ
          <code class="inline">POST /api/books</code>โฆ
        </div> -->
      </main>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast" style="display: none">
      <div id="toastBox">ุชู ุงูุญูุธ ุจูุฌุงุญ โ</div>
    </div>

    <script>
      const baseURL = "http://127.0.0.1:8000/api";

      async function request(method, path, body) {
        const opts = { method, headers: { Accept: "application/json" } };
        if (body instanceof FormData) {
          opts.body = body;
        } else if (body) {
          opts.headers["Content-Type"] = "application/json";
          opts.body = JSON.stringify(body);
        }
        const res = await fetch(`${baseURL}${path}`, opts);
        let data = null;
        try {
          data = await res.json();
        } catch {}
        if (!res.ok) throw new Error(JSON.stringify(data || res.statusText));
        return data;
      }

      async function handleSubmit(e, resource) {
        e.preventDefault();
        const f = e.target;
        const data = new FormData(f);
        try {
          await request("POST", `/${resource}`, data);
          toast("โ ุชู ุงูุญูุธ ุจูุฌุงุญ");
          f.reset();
          if (resource === "hadiths") loadHadiths();
          if (resource === "books") loadBooks();
        } catch (err) {
          alert("โ ูุดู ุงูุญูุธ:\n" + err.message);
        }
      }

      function toast(msg) {
        const t = document.getElementById("toast");
        const b = document.getElementById("toastBox");
        b.textContent = msg;
        t.style.display = "flex";
        setTimeout(() => (t.style.display = "none"), 2000);
      }

      function filterNav(q) {
        document.querySelectorAll("#nav .nav-btn").forEach((btn) => {
          btn.style.display =
            btn.textContent.includes(q) || !q ? "flex" : "none";
        });
      }

      document.getElementById("nav").addEventListener("click", (e) => {
        const btn = e.target.closest(".nav-btn");
        if (!btn) return;
        document
          .querySelectorAll(".nav-btn")
          .forEach((b) => (b.dataset.active = "false"));
        btn.dataset.active = "true";
        const id = btn.dataset.tab;
        document
          .querySelectorAll(".tab")
          .forEach((t) =>
            t.setAttribute("aria-hidden", t.id === id ? "false" : "true")
          );
      });

      async function loadBooks() {
        const sel = document.getElementById("bookSelect");
        const books = await request("GET", "/books");
        sel.innerHTML = '<option value="">โ ุงุฎุชุฑ ูุชุงุจ โ</option>';
        books.forEach((b) => {
          const o = document.createElement("option");
          o.value = b.id;
          o.textContent = b.book_name;
          sel.appendChild(o);
        });
      }

      async function loadHadiths() {
        const box = document.getElementById("hadith-list");
        box.innerHTML = "...";
        try {
          const list = await request("GET", "/hadiths");
          box.innerHTML = list.length
            ? list
                .map(
                  (h) =>
                    `<div class='card'><div><b>${h.hadith_type || ""}</b> - ${
                      h.hadith_text || ""
                    }</div></div>`
                )
                .join("")
            : '<div class="hint">ูุง ุชูุฌุฏ ุฃุญุงุฏูุซ.</div>';
        } catch (e) {
          box.innerHTML = "ุฎุทุฃ ูู ุงูุชุญููู";
        }
      }

      window.addEventListener("DOMContentLoaded", () => {
        loadBooks();
        loadHadiths();
      });
    </script>
  </body>
</html>
